<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head th:fragment="head(title)">
  <meta charset="UTF-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta
          name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
  />

  <!-- site Favicon -->
  <link rel="icon" href="/images/favicon/favicon.png" sizes="32x32" />
  <link rel="apple-touch-icon" href="/images/favicon/favicon.png" />
  <meta
          name="msapplication-TileImage"
          content="/images/favicon/favicon.png"
  />

  <!-- css Icon Font -->
  <link rel="stylesheet" href="/css/vendor/ecicons.min.css" />

  <!-- css All Plugins Files -->
  <link rel="stylesheet" href="/css/plugins/animate.css" />
  <link rel="stylesheet" href="/css/plugins/swiper-bundle.min.css" />
  <link rel="stylesheet" href="/css/plugins/jquery-ui.min.css" />
  <link rel="stylesheet" href="/css/plugins/countdownTimer.css" />
  <link rel="stylesheet" href="/css/plugins/slick.min.css" />
  <link rel="stylesheet" href="/css/plugins/nouislider.css" />
  <link rel="stylesheet" href="/css/plugins/bootstrap.css" />

  <!-- Main Style -->
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/responsive.css" />

  <!-- Background css -->
  <link
          rel="stylesheet"
          id="bg-switcher-css"
          href="/css/backgrounds/bg-4.css"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com/" />
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link
          href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800&amp;family=Poppins:wght@300;400;500;600;700;800;900&amp;family=Roboto:wght@400;500;700;900&amp;display=swap"
          rel="stylesheet"
  />

  <link href="/css/materialdesignicons.min.css" rel="stylesheet" />

  <!-- PLUGINS CSS STYLE -->
  <link href="/plugins/simplebar/simplebar.css" rel="stylesheet" />

  <!-- Ekka CSS -->
  <link id="ekka-css" rel="stylesheet" href="/css/ekka.css" />

  <!-- FAVICON -->
  <link href="/img/favicon.png" rel="shortcut icon" />
  <title th:text="${title}"></title>

  <script src="/js/vendor/jquery-3.5.1.min.js"></script>

  <script src="/js/vendor/popper.min.js"></script>
  <script src="/js/vendor/bootstrap.min.js"></script>
  <script src="/js/vendor/jquery-migrate-3.3.0.min.js"></script>
  <script src="/js/vendor/modernizr-3.11.2.min.js"></script>

  <script src="/js/plugins/swiper-bundle.min.js"></script>
  <script src="/js/plugins/nouislider.js"></script>
  <script src="/js/plugins/countdownTimer.min.js"></script>
  <script src="/js/plugins/jquery.zoom.min.js"></script>
  <script src="/js/plugins/slick.min.js"></script>
  <script src="/js/plugins/infiniteslidev2.js"></script>
  <script src="/js/vendor/jquery.magnific-popup.min.js"></script>
  <script src="/js/plugins/jquery.sticky-sidebar.js"></script>

  <script src="/js/main.js"></script>
  <script src="/js/ekka.js"></script>
</head>

<header th:fragment="header(page)" class="ec-main-header" id="header">
  <nav class="navbar navbar-static-top navbar-expand-lg">
    <!-- Sidebar toggle button -->
    <button id="sidebar-toggler" class="sidebar-toggle"></button>
    <!-- search form -->
    <div class="search-form d-lg-inline-block">

        <form th:action="@{${page == 'user' ? '/admin/user/list' :
                            page == 'subject' ? '/admin/subject/list' : ''}}" method="post" >
          <div class="input-group">
        <input type="text" name="query" id="search-input" class="form-control"
               th:value="${query}"
               placeholder="Tìm kiếm đề thi" autofocus autocomplete="off" />
        <button type="button" name="search" id="search-btn" class="btn btn-flat">
          <i class="mdi mdi-magnify"></i>
        </button>
      </div></form>
      <div id="search-results-container">
        <ul id="search-results"></ul>
      </div>
    </div>
    <!-- navbar right -->
    <div class="navbar-right">
      <ul class="nav navbar-nav">
        <!-- User Account -->
        <li sec:authorize="isAuthenticated()" class="dropdown user-menu">
          <button class="dropdown-toggle nav-link ec-drop" data-bs-toggle="dropdown"
                  aria-expanded="false">
            <th:block th:switch="${#authentication.principal.user.image_name == null}">
              <img th:case="${false}" th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}"
                   class="user-image" alt="User Image" >
              <img th:case="${true}"
                   src="https://png.pngtree.com/png-clipart/20210608/ourlarge/pngtree-white-silhouette-avatar-png-image_3418408.jpg"
                   class="user-image" alt="User Image" >
            </th:block>
          </button>
          <ul class="dropdown-menu dropdown-menu-right ec-dropdown-menu">
            <li class="dropdown-header">
              <th:block th:switch="${#authentication.principal.user.image_name == null}">
                <img th:case="${false}" th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}"
                     class="user-image" alt="User Image" >
                <img th:case="${true}"
                     src="https://png.pngtree.com/png-clipart/20210608/ourlarge/pngtree-white-silhouette-avatar-png-image_3418408.jpg"
                     class="user-image" alt="User Image" >
              </th:block>
              <div class="d-inline-block" sec:authentication="principal.user.fullname">
                 <small class="pt-1"></small>
              </div>
            </li>
            <li>
              <a href="/profile"> <i class="mdi mdi-account"></i> Thông tin chi tiết </a>
            </li>
            <li>
              <a href="/profile/history"> <i class="mdi mdi-palette-advanced"></i> Lịch sử bài thi </a>
            </li>
            <li>
              <a href="/profile/changePassword"> <i class="mdi mdi-settings-outline"></i> Đổi mật khẩu </a>
            </li>
            <li class="dropdown-footer">
              <a href="/logout"> <i class="mdi mdi-logout"></i> Đăng xuất </a>
            </li>
          </ul>
        </li>
        <li sec:authorize="isAnonymous()" class="dropdown">
        <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="/login" class="btn btn-primary mr-1">Đăng nhập</a>
        </li>
        <li class="dropdown">
          <a href="/register" class="btn btn-secondary">Đăng ký</a>
        </li>
        </ul>
        </li>
      </ul>
    </div>
  </nav>
</header>


<div th:fragment="sidebar(is_active)" class="ec-left-sidebar ec-bg-sidebar">
  <div id="sidebar" class="sidebar ec-sidebar-footer">
    <div class="ec-brand">
      <a href="/admin/dashboard" title="Thi online">
        <img class="ec-brand-icon" src="/img/logo/ec-site-logo.png" alt="" />
        <span class="ec-brand-name text-truncate" style="color: whitesmoke">Thi Online</span>
      </a>
    </div>
    <!-- begin sidebar scrollbar -->
    <div class="ec-navigation" data-simplebar>
      <!-- sidebar menu -->
      <ul class="nav sidebar-inner" id="sidebar-menu">
        <!-- Dashboard -->
        <li th:classappend="${is_active.equals('dashboard')? 'active' : '' }">
          <a class="sidenav-item-link" th:href="@{/admin/dashboard}">
            <i class="mdi mdi-view-dashboard-outline"></i>
            <span class="nav-text">Dashboard</span>
          </a>
          <hr>
        </li>
        <!-- Users -->
        <li class="has-sub" th:classappend="${is_active.equals('users')? 'active' : '' }">
          <a class="sidenav-item-link" th:href="@{/admin/user/list}">
            <i class="mdi mdi-account-group"></i>
            <span class="nav-text">Tài khoản</span>
          </a>
          <hr>
        </li>


        <li class="has-sub" th:classappend="${is_active.equals('subjects')? 'active' : '' }">
          <a class="sidenav-item-link" th:href="@{/admin/subject/list}">
            <i class="mdi mdi-dns-outline"></i>
            <span class="nav-text">Môn thi</span>
          </a>
        </li>


        <li class="has-sub" th:classappend="${is_active.equals('topics')? 'active' : '' }">
          <a class="sidenav-item-link" th:href="@{/admin/topic/list?subject=0}">
            <i class="mdi mdi-palette-advanced"></i>
            <span class="nav-text">Chủ đề</span>
          </a>
        </li>


        <li class="has-sub" th:classappend="${is_active.equals('exams')? 'active' : '' }">
          <a class="sidenav-item-link" th:href="@{/admin/exam/list?subject=0&topic=0}">
            <i class="mdi mdi-tag-faces"></i>
            <span class="nav-text">Bài thi</span>
          </a>
        </li>


        <li class="has-sub" th:classappend="${is_active.equals('comments')? 'active' : '' }">
          <a class="sidenav-item-link" href="/admin/comment">
            <i class="mdi mdi-star-half"></i>
            <span class="nav-text">Bình luận</span>
          </a>
        </li>
        <li class="has-sub">
          <a class="sidenav-item-link" href="/home">
            <i class="mdi mdi-image-filter-none"></i>
            <span class="nav-text">Đi đến trang chủ</span>
          </a>
        </li>

      </ul>
    </div>
  </div>
</div>

<div th:fragment="sidebarCustomer(is_active, subjects)" class="ec-left-sidebar ec-bg-sidebar">
  <div id="sidebar" class="sidebar ec-sidebar-footer">
    <div class="ec-brand">
      <a href="/home" title="Thi online">
        <img class="ec-brand-icon" src="/img/logo/ec-site-logo.png" alt="" />
        <span class="ec-brand-name text-truncate" style="color: whitesmoke">Thi Online</span>
      </a>
    </div>
    <!-- begin sidebar scrollbar -->
    <div class="ec-navigation" data-simplebar>
      <!-- sidebar menu -->
      <ul class="nav sidebar-inner" id="sidebar-menu">
        <!-- Dashboard -->
        <li sec:authorize="isAnonymous()">
          <ul class="nav sidebar-inner" id="sidebar-menu">
         <li th:classappend="${is_active.equals('login')? 'active' : '' }">
          <a class="sidenav-item-link" href="/login">
            <i class="mdi mdi-login"></i>
            <span class="nav-text">Đăng nhập</span>
          </a>
          <hr>
         </li>
         <li th:classappend="${is_active.equals('register')? 'active' : '' }">
          <a class="sidenav-item-link" href="/register">
            <i class="mdi mdi-account-group-outline"></i>
            <span class="nav-text">Đăng ký</span>
          </a>
          <hr>
         </li>
          </ul>
        </li>
        <li sec:authorize="isAuthenticated()">
          <div class="ec-brand">
            <a href="/profile">
              <th:block th:switch="${#authentication.principal.user.image_name == null}">
                <img th:case="${false}" th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}"
                     class="ec-brand-icon" alt="User Image">
                <img th:case="${true}"
                     src="https://png.pngtree.com/png-clipart/20210608/ourlarge/pngtree-white-silhouette-avatar-png-image_3418408.jpg"
                     class="ec-brand-icon" alt="User Image">
              </th:block>
<!--              <img th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}" class="ec-brand-icon" alt="User Image" />-->
              <span class="ec-brand-name text-truncate" style="color: red; font-size: large" sec:authentication="principal.user.fullname"></span>
            </a>
          </div>
        </li>
        <li class="has-sub expand">
          <a class="sidenav-item-link" href="javascript:void(0)">
            <i class="mdi mdi-dns-outline"></i>
            <span class="nav-text">Môn thi</span> <b class="caret"></b>
          </a>
          <div class="collapse show">
            <ul class="sub-menu" id="categorys" data-parent="#sidebar-menu">
              <li th:each="subject,iterStat : ${subjectList}">
                <a class="sidenav-item-link" th:href="@{/subject(subject=${iterStat.index})}">
                  <span class="nav-text" th:text="${subject.name}"></span>
                </a>
              </li>
            </ul>
          </div>
        </li>

      </ul>
    </div>
  </div>
</div>

<div th:fragment="leftside(is_active)" class="ec-shop-leftside ec-vendor-sidebar col-lg-3 col-md-12">
  <div class="ec-sidebar-wrap">
    <div class="ec-sidebar-block">
      <div class="ec-vendor-block">
        <div class="ec-vendor-block-items">
          <ul>
            <li><a th:classappend="${is_active == 'profile' ? 'active-leftside' : ''}" href="/profile">Thông tin người dùng</a></li>
            <li><a th:classappend="${is_active == 'history' ? 'active-leftside' : ''}" href="/profile/history">Lịch sử bài thi</a></li>
            <li><a th:classappend="${is_active == 'change_pass' ? 'active-leftside' : ''}" href="/profile/changePassword">Đổi mật khẩu</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<div th:fragment="goToHome(current)" class="col-md-6 col-sm-12">
  <ul class="ec-breadcrumb-list">
    <li class="ec-breadcrumb-item"><a href="/home">Trang chủ</a></li>
    <li class="ec-breadcrumb-item active" th:text="${current == 'login' ? 'Đăng nhập' :
                                                     current == 'register' ? 'Đăng ký' :
                                                     current == 'subject' ? 'Môn thi' :
                                                     current == 'profile' ? 'Thông tin người dùng' :
                                                     current == 'history' ? 'Lịch sử bài thi' :
                                                     current == 'search' ? 'Tìm kiếm' : ''}"></li>
  </ul>
</div>

<footer th:fragment="footer()" class="footer mt-auto">
  <div class="copyright bg-white">
    <p>
      Copyright &copy; <span id="ec-year"></span><a class="text-primary" href="https://themeforest.net/user/ashishmaraviya" target="_blank"> Test Online Admin </a>. All Rights Reserved.
    </p>
  </div>
</footer>

<footer th:fragment="footerCustomer()" class="footer mt-auto">
  <div class="copyright bg-white">
    <p>
      Copyright &copy; <span id="ec-year"></span><a class="text-primary" href="https://themeforest.net/user/ashishmaraviya" target="_blank"> Test Online </a>. All Rights Reserved.
    </p>
  </div>
</footer>

<div th:fragment="headerCustomer(subjectList)" class="ec-main-header" id="header1">
  <nav class="navbar navbar-static-top navbar-expand-lg">
    <!-- Sidebar toggle button -->
    <button id="sidebar-toggler" class="sidebar-toggle"></button>
    <!-- search form -->
    <div class="search-form d-lg-inline-block">

      <form th:action="@{/search}" method="get" >
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <select name="subjectName" id="subjectName" class="form-select">
              <option value="" disabled selected>Môn học</option>
              <th:block th:each="subject : ${subjectList}">
                <option th:value="${subject.id}" th:text="${subject.name}"></option>
              </th:block>
          </select>
          </li>
          <li class="dropdown">
            <select name="time" id="time" class="form-select">
              <option value="" disabled selected>Thời gian</option>
              <option value="900">15 phút</option>
              <option value="1800">30 phút</option>
              <option value="2700">45 phút</option>
              <option value="3600">60 phút</option>
            </select>
          </li>
          <li class="dropdown">
            <div class="d-flex">
            <input type="text" name="query" id="search-input1" class="form-control"
                   th:value="${query}"
                   placeholder="Tìm kiếm đề thi" autofocus autocomplete="off" />
            <button type="button" name="search" id="search-btn1" class="btn btn-flat">
              <i class="mdi mdi-magnify"></i>
            </button></div>
          </li>
        </ul>
      </form>
      <div id="search-results-container1">
        <ul id="search-result1"></ul>
      </div>
    </div>
    <!-- navbar right -->
    <div class="navbar-right">
      <ul class="nav navbar-nav">
        <!-- User Account -->
        <li sec:authorize="isAuthenticated()" class="dropdown user-menu">
          <button class="dropdown-toggle nav-link ec-drop" data-bs-toggle="dropdown"
                  aria-expanded="false">
            <th:block th:switch="${#authentication.principal.user.image_name == null}">
              <img th:case="${false}" th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}"
                   class="user-image" alt="User Image" >
              <img th:case="${true}"
                   src="https://png.pngtree.com/png-clipart/20210608/ourlarge/pngtree-white-silhouette-avatar-png-image_3418408.jpg"
                   class="user-image" alt="User Image" >
            </th:block>
            <!--            <img th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}" class="user-image" alt="User Image" />-->
          </button>
          <ul class="dropdown-menu dropdown-menu-right ec-dropdown-menu">
            <li class="dropdown-header">
              <th:block th:switch="${#authentication.principal.user.image_name == null}">
                <img th:case="${false}" th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}"
                     class="user-image" alt="User Image" >
                <img th:case="${true}"
                     src="https://png.pngtree.com/png-clipart/20210608/ourlarge/pngtree-white-silhouette-avatar-png-image_3418408.jpg"
                     class="user-image" alt="User Image" >
              </th:block>
              <!--              <img th:src="@{/image-file/{image_name}(image_name=${#authentication.principal.user.image_name})}" class="img-circle" alt="User Image" />-->
              <div class="d-inline-block" sec:authentication="principal.user.fullname">
                <small class="pt-1"></small>
              </div>
            </li>
            <li>
              <a href="/profile"> <i class="mdi mdi-account"></i> Thông tin chi tiết </a>
            </li>
            <li th:each="authority :${#authentication.authorities}" th:if="${authority.authority.contains('ROLE_ADMIN')}">
              <a href="/admin/dashboard"> <i class="mdi mdi-login"></i> Đến trang quản trị </a>
            </li>
            <li>
              <a href="/profile/history"> <i class="mdi mdi-palette-advanced"></i> Lịch sử bài thi </a>
            </li>
            <li>
              <a href="/profile/changePassword"> <i class="mdi mdi-settings-outline"></i> Đổi mật khẩu </a>
            </li>
            <li class="dropdown-footer">
              <a href="/logout"> <i class="mdi mdi-logout"></i> Đăng xuất </a>
            </li>
          </ul>
        </li>
        <li sec:authorize="isAnonymous()" class="dropdown">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="/login" class="btn btn-primary mr-1">Đăng nhập</a>
            </li>
            <li class="dropdown">
              <a href="/register" class="btn btn-secondary">Đăng ký</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>
</div>

</html>