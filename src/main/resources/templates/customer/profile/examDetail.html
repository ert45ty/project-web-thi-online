<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments::head('Topics')">
</head>
<body class="ec-header-fixed ec-sidebar-fixed ec-sidebar-dark ec-header-light" id="body">
<header class="header text-center" style=" background-color: black; padding: 15px; position: sticky; top: 0; z-index: 1000;">
  <h2 style="color: white;">Điểm của bạn:</h2>
</header>
<h2 th:text="${exam.title}" class="text-center mt-4"></h2>
<div class="wrapper justify-content-center">
  <div>
    <div class="ec-content-wrapper">
      <div class="content">
        <div class="row">
          <div class="col-xl-12 col-lg-12 mx-auto">
            <div class="ec-cat-list card card-default mb-24px">
              <div class="card-body">
                <div class="ec-cat-form">
                  <h3 th:text="'Câu ' + ${currentIndex + 1} +':'"></h3>
                  </br>
                  <form th:action="@{/profile/history/detail(resultId=${resultId}, currentIndex=${currentIndex})}"
                        method="post" id="form">
                    <div class="wrapper d-flex justify-content-between">
                      <div>
                        <p th:text="${currentQuestion.question_text}"></p>
                        </br>
                        <div class="d-flex justify-content-center">
                          <img th:if="${currentQuestion.image_name != null && !currentQuestion.image_name.isEmpty()}"
                               th:src="'/image-file/' + ${currentQuestion.image_name}">
                        </div>
                        </br>
                        <div th:each="option, iter : ${currentOptions}" class="d-flex align-items-center mb-4">
                          <input disabled style="width: 15px; height: 15px; margin-right: 5px" type="radio" name="optionId"
                                 th:id="'option' +${iter.count}"
                                 th:value="${option.id}"
                                 th:checked="${option.id == currentAnswer}">
                          <p th:text="${option.option_text}"></p>
                        </div>
                      </div>
                      <div class="col-xl-4 col-lg-12">
                        <div class="ec-cat-list card card-default mb-24px">
                          <div class="card-body">
                            <h4>Bảng câu hỏi</h4>
                            <div class="mt-3 d-flex flex-wrap" >
                              <div th:each="i : ${#numbers.sequence(1,totalQuestion)}">
                                <button class="btn-exam" type="submit" name="action"
                                        th:value="${i}"
                                        th:text="${i}"
                                        th:classappend="${answers.get(i - 1) ? 'btn-success' : 'btn-danger'}"
                                />
                              </div>
                            </div>
                            <br/>
                            <div class="row">
                              <div class="col-9">
                                <button type="submit" th:disabled="${currentIndex == 0}" name="action" value="back">Câu trước</button>
                              </div>
                              <div class="col-3" th:switch="${currentIndex == (exam.total_question - 1)}">
                                <button th:case="${false}" type="submit" name="action" value="next">Câu tiếp</button>
                                <button th:case="${true}" type="submit" name="finish" value="true">Quay về</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <footer th:replace="fragments::footer()"></footer>
  </div>
</div>

</body>
</html>